<!-- ===== WindowsLauncher.UI/LoginWindow.xaml - КОРПОРАТИВНЫЙ СТИЛЬ ===== -->
<Window x:Class="WindowsLauncher.UI.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Корпоративный Лаунчер - Вход в систему" 
        Height="865" Width="450"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F5F5F5">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles/CorporateStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <!-- Background with gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#F5F5F5" Offset="0"/>
                <GradientStop Color="#EEEEEE" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Header -->
        <Border Background="{StaticResource CorporateHeaderGradient}" 
                Height="100" VerticalAlignment="Top">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <Image Source="/KDV.png"
                   Width="150"
                   Height="40"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="10"/>
                <TextBlock Text="Корпоративный Лаунчер" 
                           Style="{StaticResource CorporateTitle}" FontSize="18"/>
            </StackPanel>
        </Border>

        <!-- Login Form -->
        <Border Background="White" Margin="40,120,40,40" CornerRadius="12" 
                BorderThickness="1" BorderBrush="{StaticResource CorporateBorder}">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" 
                                BlurRadius="10" Opacity="0.1"/>
            </Border.Effect>

            <StackPanel Margin="40">
                <TextBlock Text="Вход в систему" FontSize="22" FontWeight="Light" 
                          HorizontalAlignment="Center" Margin="0,0,0,24" 
                          Foreground="{StaticResource CorporateText}"/>

                <!-- Current User Option -->
                <Border Background="#FFF8F8" BorderBrush="{StaticResource CorporateRed}" 
                        BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Текущий пользователь Windows:" 
                                   FontWeight="SemiBold" 
                                   Foreground="{StaticResource CorporateRed}" 
                                   FontSize="13"/>
                        <TextBlock x:Name="CurrentUserText" Text="Загрузка..." 
                                   Foreground="{StaticResource CorporateText}" 
                                   Margin="0,4,0,12" FontSize="12"/>
                        <Button Content="Продолжить как текущий пользователь" 
                                Style="{StaticResource CorporateButton}"
                                Click="CurrentUserButton_Click"
                                x:Name="CurrentUserButton"/>
                    </StackPanel>
                </Border>

                <Border Height="1" Background="{StaticResource CorporateBorder}" 
                        Margin="0,0,0,24"/>

                <TextBlock Text="Или войти с другими учетными данными:" 
                          FontWeight="Normal" Margin="0,0,0,20" 
                          HorizontalAlignment="Center"
                          Foreground="{StaticResource CorporateTextLight}"/>

                <!-- Username -->
                <TextBlock Text="Имя пользователя:" FontWeight="SemiBold" 
                          Margin="0,0,0,6" Style="{StaticResource CorporateBodyText}"/>
                <TextBox x:Name="UsernameTextBox" 
                         Style="{StaticResource CorporateSearchBox}"
                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,0,0,16"/>

                <!-- Password -->
                <TextBlock Text="Пароль:" FontWeight="SemiBold" 
                          Margin="0,0,0,6" Style="{StaticResource CorporateBodyText}"/>
                <PasswordBox x:Name="PasswordBox" 
                            Background="White" BorderBrush="{StaticResource CorporateBorder}"
                            BorderThickness="1" Padding="16,10" FontSize="14"
                            Margin="0,0,0,16">
                    <PasswordBox.Style>
                        <Style TargetType="PasswordBox">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="PasswordBox">
                                        <Border Background="{TemplateBinding Background}"
                                              BorderBrush="{TemplateBinding BorderBrush}"
                                              BorderThickness="{TemplateBinding BorderThickness}"
                                              CornerRadius="6">
                                            <ScrollViewer x:Name="PART_ContentHost" 
                                                        Margin="{TemplateBinding Padding}"
                                                        VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsFocused" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource CorporateRed}"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </PasswordBox.Style>
                </PasswordBox>

                <!-- Error Message -->
                <Border x:Name="ErrorBorder" Background="#FFF0F0" BorderBrush="#FFB0B0" 
                        BorderThickness="1" CornerRadius="6" Padding="12" Margin="0,0,0,16"
                        Visibility="Collapsed">
                    <TextBlock x:Name="ErrorMessage" 
                              Foreground="#CC0000" FontSize="12" 
                              TextWrapping="Wrap"/>
                </Border>

                <!-- Login Button -->
                <Button Content="Войти" 
                        Style="{StaticResource CorporateButton}"
                        Click="LoginButton_Click"
                        x:Name="LoginButton"
                        Margin="0,0,0,12"/>

                <!-- Cancel Button -->
                <Button Content="Отмена" 
                        Style="{StaticResource CorporateButtonSecondary}"
                        Click="CancelButton_Click"/>

                <!-- Loading Indicator -->
                <StackPanel x:Name="LoadingPanel" Orientation="Horizontal" 
                           HorizontalAlignment="Center" Margin="0,20,0,0"
                           Visibility="Collapsed">
                    <Border Width="20" Height="20" Background="{StaticResource CorporateRed}" 
                            CornerRadius="10" Margin="0,0,12,0">
                        <TextBlock Text="⏳" FontSize="12" HorizontalAlignment="Center" 
                                  VerticalAlignment="Center" Foreground="White">
                            <TextBlock.RenderTransform>
                                <RotateTransform/>
                            </TextBlock.RenderTransform>
                            <TextBlock.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                           From="0" To="360" Duration="0:0:1.5"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </TextBlock.Triggers>
                        </TextBlock>
                    </Border>
                    <TextBlock Text="Аутентификация..." FontSize="12" 
                              VerticalAlignment="Center"
                              Foreground="{StaticResource CorporateTextLight}"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>