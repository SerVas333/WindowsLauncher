<!-- SystemTaskbarWindow.xaml - Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð·Ð°Ð´Ð°Ñ‡ Ð´Ð»Ñ Shell-Ñ€ÐµÐ¶Ð¸Ð¼Ð° -->
<Window x:Class="WindowsLauncher.UI.Components.SystemTaskbar.SystemTaskbarWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        xmlns:properties="clr-namespace:WindowsLauncher.UI.Properties.Resources"
        Title="System Taskbar"
        Height="60" 
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÑ‚Ð¸Ð»ÐµÐ¹ -->
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/CorporateStylesFull.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <!-- ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€Ñ‹ -->
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        </ResourceDictionary>
    </Window.Resources>

    <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð·Ð°Ð´Ð°Ñ‡ -->
    <Border Background="{StaticResource PrimaryBrush}" 
            CornerRadius="0" 
            BorderBrush="{StaticResource PrimaryDarkBrush}" 
            BorderThickness="0,1,0,0">
        <Grid>
            <Grid.ColumnDefinitions>
                <!-- Ð›ÐµÐ²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: ÐŸÑƒÑÐº -->
                <ColumnDefinition Width="Auto"/>
                <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: Ð Ð°ÑÑ‚ÑÐ³Ð¸Ð²Ð°ÐµÑ‚ÑÑ -->
                <ColumnDefinition Width="*"/>
                <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: AppSwitcher + WSA + ÐšÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ð° + Ð’Ñ€ÐµÐ¼Ñ -->
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° "ÐŸÑƒÑÐº" Ñ Ð²Ñ‹Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ð¼ Ð¼ÐµÐ½ÑŽ -->
            <Button x:Name="StartButton" 
                    Grid.Column="0"
                    Click="StartButton_Click"
                    Width="120" Height="48" 
                    Margin="8,6,4,6"
                    ToolTip="ÐœÐµÐ½ÑŽ ÐŸÑƒÑÐº"
                    Background="{StaticResource PrimaryLightBrush}"
                    Foreground="{StaticResource OnPrimaryBrush}"
                    BorderBrush="{StaticResource PrimaryBrush}"
                    BorderThickness="1">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                
                <!-- ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÐŸÑƒÑÐº - Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð´Ð»Ñ ÑÐµÐ½ÑÐ¾Ñ€Ð½Ñ‹Ñ… ÑÐºÑ€Ð°Ð½Ð¾Ð² -->
                <Button.ContextMenu>
                    <ContextMenu x:Name="StartContextMenu" 
                                 MinWidth="300" 
                                 Background="{StaticResource SurfaceBrush}"
                                 BorderBrush="{StaticResource PrimaryBrush}"
                                 BorderThickness="2"
                                 Padding="8">
                        <ContextMenu.Resources>
                            <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ Ð¿ÑƒÐ½ÐºÑ‚Ð¾Ð² Ð¼ÐµÐ½ÑŽ - Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ð´Ð»Ñ ÑÐµÐ½ÑÐ¾Ñ€Ð½Ð¾Ð³Ð¾ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
                            <Style TargetType="MenuItem">
                                <Setter Property="Height" Value="60"/>
                                <Setter Property="Padding" Value="16,12"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                                <Setter Property="Foreground" Value="{StaticResource OnSurfaceBrush}"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="MenuItem">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    Padding="{TemplateBinding Padding}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <ContentPresenter x:Name="Icon" 
                                                                      Grid.Column="0"
                                                                      Content="{TemplateBinding Icon}"
                                                                      VerticalAlignment="Center"
                                                                      Margin="0,0,16,0"/>
                                                    
                                                    <TextBlock x:Name="HeaderText"
                                                               Grid.Column="1" 
                                                               Text="{TemplateBinding Header}"
                                                               FontSize="{TemplateBinding FontSize}"
                                                               FontWeight="{TemplateBinding FontWeight}"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsHighlighted" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
                                                    <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                                    <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                            
                            <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÐµÐ¹ -->
                            <Style TargetType="Separator">
                                <Setter Property="Height" Value="2"/>
                                <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
                                <Setter Property="Margin" Value="8,4"/>
                                <Setter Property="Opacity" Value="0.3"/>
                            </Style>
                        </ContextMenu.Resources>
                        
                        <!-- Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¾ÐºÐ½Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ -->
                        <MenuItem Header="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ" Click="ShowMainWindow_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="Home" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        
                        <Separator/>
                        
                        <!-- Ð¡Ð¼ÐµÐ½Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ -->
                        <MenuItem Header="Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" Click="SwitchUser_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="UserCircle" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        
                        <!-- ÐÐ´Ð¼Ð¸Ð½ Ð¿Ð°Ð½ÐµÐ»ÑŒ -->
                        <MenuItem x:Name="AdminMenuItem" Header="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ" Click="OpenAdmin_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="Cogs" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        
                        <!-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ -->
                        <MenuItem Header="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸" Click="OpenSettings_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="Cog" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        
                        <Separator/>
                        
                        <!-- ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ -->
                        <MenuItem Header="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Click="Refresh_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="Refresh" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        
                        <Separator/>
                        
                        <!-- Ð’Ñ‹Ñ…Ð¾Ð´ -->
                        <MenuItem Header="Ð’Ñ‹Ð¹Ñ‚Ð¸" Click="Logout_Click">
                            <MenuItem.Icon>
                                <fa:ImageAwesome Icon="SignOut" Width="24" Height="24" Foreground="{StaticResource PrimaryBrush}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </Button.ContextMenu>
                
                <StackPanel Orientation="Horizontal">
                    <fa:ImageAwesome Icon="Home" 
                                     Width="16" Height="16" 
                                     Foreground="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                     VerticalAlignment="Center" 
                                     Margin="0,0,8,0"/>
                    <TextBlock Text="ÐŸÑƒÑÐº" 
                               Foreground="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                               FontSize="14" FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ -->
            <Button x:Name="AppSwitcherButton"
                    Grid.Column="2"
                    Click="AppSwitcherButton_Click"
                    Width="100" Height="48" 
                    Margin="8,6,4,6"
                    Background="{StaticResource PrimaryBrush}"
                    BorderBrush="{StaticResource PrimaryBrush}"
                    BorderThickness="0">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                <Setter Property="BorderThickness" Value="0"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                                <Setter Property="BorderThickness" Value="1"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <Button.ToolTip>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹" FontWeight="SemiBold"/>
                        <TextBlock x:Name="AppSwitcherTooltipText" Text="Ð ÐµÐ¶Ð¸Ð¼: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..." FontSize="11" Opacity="0.8"/>
                    </StackPanel>
                </Button.ToolTip>
                <StackPanel Orientation="Horizontal">
                    <fa:ImageAwesome x:Name="AppSwitcherIcon"
                                     Icon="WindowRestore" 
                                     Width="16" Height="16" 
                                     Foreground="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                     VerticalAlignment="Center" 
                                     Margin="0,0,6,0"/>
                    <TextBlock x:Name="AppCountTextBlock" 
                               Text="Apps(0)" 
                               Foreground="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                               FontSize="12" FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

            <!-- WSA Status Indicator -->
            <Border x:Name="WSAStatusIndicator"
                    Grid.Column="3"
                    Background="Transparent"
                    CornerRadius="4"
                    Padding="8,4"
                    Margin="8,6,4,6"
                    ToolTip="Android Ð¿Ð¾Ð´ÑÐ¸ÑÑ‚ÐµÐ¼Ð°"
                    Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ¤–" FontSize="14" Margin="0,0,6,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="WSAStatusTextBlock" 
                              Text="Unknown"
                              FontSize="12" 
                              FontWeight="SemiBold"
                              Foreground="#666666"
                              VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð¹ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹ -->
            <Button x:Name="VirtualKeyboardButton" 
                    Grid.Column="4"
                    Click="VirtualKeyboardButton_Click"
                    Width="48" Height="48" 
                    Margin="4,6,8,6"
                    ToolTip="Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ð°"
                    Background="{StaticResource PrimaryLightBrush}"
                    Foreground="{StaticResource OnPrimaryBrush}"
                    BorderBrush="{StaticResource PrimaryBrush}"
                    BorderThickness="1">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource OnPrimaryBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <fa:ImageAwesome Icon="KeyboardOutline" 
                                 Width="24" Height="18" 
                                 Foreground="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"/>
            </Button>

            <!-- Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ (Ð’Ñ€ÐµÐ¼Ñ Ð¸ Ð´Ð°Ñ‚Ð°) - ÐºÑ€Ð°Ð¹Ð½ÐµÐµ Ð¿Ñ€Ð°Ð²Ð¾Ðµ Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ -->
            <Border Grid.Column="5" 
                    Background="{StaticResource PrimaryDarkBrush}"
                    CornerRadius="4" Margin="8,8,8,8" Padding="12,6">
                <StackPanel Orientation="Vertical">
                    <TextBlock x:Name="TimeTextBlock" 
                               Text="14:25" 
                               Foreground="{StaticResource OnPrimaryBrush}"
                               FontSize="14" FontWeight="Bold"
                               HorizontalAlignment="Center"/>
                    <TextBlock x:Name="DateTextBlock" 
                               Text="15.01.2025" 
                               Foreground="{StaticResource OnPrimaryBrush}"
                               FontSize="10" 
                               HorizontalAlignment="Center"
                               Opacity="0.9"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>