-- ===== create_firebird_server_v1.0.0.001_FIXED.sql =====
-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Firebird 5.0 Server
-- –î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫ —Å Firebird Server 5.0+
-- 
-- –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
-- 1. Firebird Server 5.0+ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
-- 2. –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–µ SYSDBA)
-- 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

-- ===== –ü–ê–†–ê–ú–ï–¢–†–´ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø =====
-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
-- SERVER: localhost –∏–ª–∏ IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ Firebird
-- DATABASE: –∏–º—è/–∞–ª–∏–∞—Å –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
-- USER: —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ù–ï SYSDBA)
-- PASSWORD: –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å

-- ===== –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–¥ SYSDBA:

/*
-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ security5.fdb –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Firebird 5.0)
isql "C:\Program Files\Firebird\Firebird_5_0\security5.fdb" -user SYSDBA -password your_sysdba_password

-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CREATE USER KDV_LAUNCHER PASSWORD 'KDV_L@unch3r_S3cur3_2025!';

-- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ
QUIT;
*/

-- ===== –°–û–ó–î–ê–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–• =====
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–¥ SYSDBA –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î:

CREATE DATABASE 'KDV_LAUNCHER'
PAGE_SIZE 16384
USER 'SYSDBA' 
PASSWORD 'Ghtgjyf1'
DEFAULT CHARACTER SET UTF8;

-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ë–î
CONNECT 'KDV_LAUNCHER' 
USER 'SYSDBA' 
PASSWORD 'Ghtgjyf1';

-- ===== –°–û–ó–î–ê–ù–ò–ï –†–û–õ–ï–ô –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò =====
CREATE ROLE LAUNCHER_USER;
CREATE ROLE LAUNCHER_ADMIN;
CREATE ROLE LAUNCHER_READONLY;

-- ===== –°–û–ó–î–ê–ù–ò–ï –¢–ê–ë–õ–ò–¶ –° IDENTITY –ö–û–õ–û–ù–ö–ê–ú–ò =====

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Firebird 5.0 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
CREATE TABLE USERS (
    ID INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    USERNAME VARCHAR(100) NOT NULL,
    DISPLAY_NAME VARCHAR(200) NOT NULL,
    EMAIL VARCHAR(255),
    ROLE INTEGER NOT NULL,
    IS_ACTIVE BOOLEAN NOT NULL,
    IS_SERVICE_ACCOUNT BOOLEAN NOT NULL,
    PASSWORD_HASH VARCHAR(500),
    SALT VARCHAR(500),
    CREATED_AT TIMESTAMP NOT NULL,
    LAST_LOGIN_AT TIMESTAMP,
    LAST_ACTIVITY_AT TIMESTAMP,
    FAILED_LOGIN_ATTEMPTS INTEGER NOT NULL,
    IS_LOCKED BOOLEAN NOT NULL,
    LOCKOUT_END TIMESTAMP,
    LAST_PASSWORD_CHANGE TIMESTAMP,
    GROUPS_JSON VARCHAR(2000),
    SETTINGS_JSON VARCHAR(4000),
    METADATA_JSON VARCHAR(2000),
    AUTHENTICATION_TYPE INTEGER NOT NULL,
    DOMAIN_USERNAME VARCHAR(100),
    LAST_DOMAIN_SYNC TIMESTAMP,
    IS_LOCAL_USER BOOLEAN NOT NULL,
    ALLOW_LOCAL_LOGIN BOOLEAN NOT NULL,
    CONSTRAINT UQ_USERS_USERNAME UNIQUE (USERNAME)
);

-- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
CREATE TABLE APPLICATIONS (
    ID INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(200) NOT NULL,
    DESCRIPTION VARCHAR(500),
    EXECUTABLE_PATH VARCHAR(1000) NOT NULL,
    ARGUMENTS VARCHAR(500),
    WORKING_DIRECTORY VARCHAR(1000),
    ICON_PATH VARCHAR(1000),
    ICONTEXT VARCHAR(50),
    CATEGORY VARCHAR(100),
    APP_TYPE INTEGER NOT NULL,
    MINIMUM_ROLE INTEGER NOT NULL,
    IS_ENABLED BOOLEAN NOT NULL,
    SORT_ORDER INTEGER NOT NULL,
    CREATED_DATE TIMESTAMP NOT NULL,
    MODIFIED_DATE TIMESTAMP NOT NULL,
    CREATED_BY VARCHAR(100),
    REQUIRED_GROUPS BLOB SUB_TYPE TEXT
);

-- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE USER_SETTINGS (
    ID INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    USER_ID INTEGER NOT NULL,
    THEME VARCHAR(50),
    ACCENT_COLOR VARCHAR(50),
    TILE_SIZE INTEGER,
    SHOW_CATEGORIES BOOLEAN,
    DEFAULT_CATEGORY VARCHAR(100),
    AUTO_REFRESH BOOLEAN,
    REFRESH_INTERVAL_MINUTES INTEGER,
    SHOW_DESCRIPTIONS BOOLEAN,
    HIDDEN_CATEGORIES BLOB SUB_TYPE TEXT,
    LAST_MODIFIED TIMESTAMP NOT NULL,
    CONSTRAINT FK_USER_SETTINGS_USER_ID FOREIGN KEY (USER_ID) 
        REFERENCES USERS(ID) ON DELETE CASCADE
);

-- –¢–∞–±–ª–∏—Ü–∞ –∞—É–¥–∏—Ç–∞
CREATE TABLE AUDIT_LOGS (
    ID INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    USER_ID INTEGER,
    USERNAME VARCHAR(100) NOT NULL,
    ACTION VARCHAR(100) NOT NULL,
    APPLICATION_NAME VARCHAR(200),
    DETAILS BLOB SUB_TYPE TEXT,
    TIMESTAMP_UTC TIMESTAMP NOT NULL,
    SUCCESS BOOLEAN NOT NULL,
    ERROR_MESSAGE VARCHAR(1000),
    COMPUTER_NAME VARCHAR(100),
    IP_ADDRESS VARCHAR(45),
    USER_AGENT VARCHAR(500),
    METADATA_JSON BLOB SUB_TYPE TEXT,
    CONSTRAINT FK_AUDIT_LOGS_USER_ID FOREIGN KEY (USER_ID) 
        REFERENCES USERS(ID) ON DELETE SET NULL
);

-- –¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä—Å–∏–π –ë–î
CREATE TABLE DATABASE_VERSION (
    VERSION VARCHAR(20) NOT NULL,
    APPLIED_AT TIMESTAMP NOT NULL,
    APPLICATION_VERSION VARCHAR(20),
    CONSTRAINT PK_DATABASE_VERSION PRIMARY KEY (VERSION)
);

-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
CREATE TABLE MIGRATION_HISTORY (
    ID INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    VERSION VARCHAR(20) NOT NULL,
    NAME VARCHAR(200) NOT NULL,
    DESCRIPTION BLOB SUB_TYPE TEXT,
    APPLIED_AT TIMESTAMP NOT NULL,
    ROLLBACK_SCRIPT BLOB SUB_TYPE TEXT
);

-- ===== –î–û–ë–ê–í–õ–ï–ù–ò–ï DEFAULT –ó–ù–ê–ß–ï–ù–ò–ô =====
-- –î–æ–±–∞–≤–ª—è–µ–º DEFAULT –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Firebird 5.0)
ALTER TABLE USERS ALTER COLUMN ROLE SET DEFAULT 2;
ALTER TABLE USERS ALTER COLUMN IS_ACTIVE SET DEFAULT TRUE;
ALTER TABLE USERS ALTER COLUMN IS_SERVICE_ACCOUNT SET DEFAULT FALSE;
ALTER TABLE USERS ALTER COLUMN FAILED_LOGIN_ATTEMPTS SET DEFAULT 0;
ALTER TABLE USERS ALTER COLUMN IS_LOCKED SET DEFAULT FALSE;
ALTER TABLE USERS ALTER COLUMN GROUPS_JSON SET DEFAULT '[]';
ALTER TABLE USERS ALTER COLUMN SETTINGS_JSON SET DEFAULT '{}';
ALTER TABLE USERS ALTER COLUMN METADATA_JSON SET DEFAULT '{}';
ALTER TABLE USERS ALTER COLUMN AUTHENTICATION_TYPE SET DEFAULT 0;
ALTER TABLE USERS ALTER COLUMN IS_LOCAL_USER SET DEFAULT TRUE;
ALTER TABLE USERS ALTER COLUMN ALLOW_LOCAL_LOGIN SET DEFAULT FALSE;

ALTER TABLE APPLICATIONS ALTER COLUMN ICONTEXT SET DEFAULT 'üì±';
ALTER TABLE APPLICATIONS ALTER COLUMN APP_TYPE SET DEFAULT 1;
ALTER TABLE APPLICATIONS ALTER COLUMN MINIMUM_ROLE SET DEFAULT 2;
ALTER TABLE APPLICATIONS ALTER COLUMN IS_ENABLED SET DEFAULT TRUE;
ALTER TABLE APPLICATIONS ALTER COLUMN SORT_ORDER SET DEFAULT 0;
ALTER TABLE APPLICATIONS ALTER COLUMN REQUIRED_GROUPS SET DEFAULT '[]';

ALTER TABLE USER_SETTINGS ALTER COLUMN THEME SET DEFAULT 'Light';
ALTER TABLE USER_SETTINGS ALTER COLUMN ACCENT_COLOR SET DEFAULT 'Blue';
ALTER TABLE USER_SETTINGS ALTER COLUMN TILE_SIZE SET DEFAULT 150;
ALTER TABLE USER_SETTINGS ALTER COLUMN SHOW_CATEGORIES SET DEFAULT TRUE;
ALTER TABLE USER_SETTINGS ALTER COLUMN DEFAULT_CATEGORY SET DEFAULT 'All';
ALTER TABLE USER_SETTINGS ALTER COLUMN AUTO_REFRESH SET DEFAULT TRUE;
ALTER TABLE USER_SETTINGS ALTER COLUMN REFRESH_INTERVAL_MINUTES SET DEFAULT 30;
ALTER TABLE USER_SETTINGS ALTER COLUMN SHOW_DESCRIPTIONS SET DEFAULT TRUE;
ALTER TABLE USER_SETTINGS ALTER COLUMN HIDDEN_CATEGORIES SET DEFAULT '[]';

ALTER TABLE AUDIT_LOGS ALTER COLUMN SUCCESS SET DEFAULT TRUE;
ALTER TABLE AUDIT_LOGS ALTER COLUMN METADATA_JSON SET DEFAULT '{}';

-- ===== –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ò–ù–î–ï–ö–°–´ =====
CREATE INDEX IDX_USERS_USERNAME ON USERS(USERNAME);
CREATE INDEX IDX_USERS_ROLE ON USERS(ROLE);
CREATE INDEX IDX_USERS_IS_ACTIVE ON USERS(IS_ACTIVE);
CREATE INDEX IDX_USERS_AUTHENTICATION_TYPE ON USERS(AUTHENTICATION_TYPE);
CREATE INDEX IDX_USERS_LAST_LOGIN_AT ON USERS(LAST_LOGIN_AT);

CREATE INDEX IDX_APPLICATIONS_NAME ON APPLICATIONS(NAME);
CREATE INDEX IDX_APPLICATIONS_CATEGORY ON APPLICATIONS(CATEGORY);
CREATE INDEX IDX_APPLICATIONS_IS_ENABLED ON APPLICATIONS(IS_ENABLED);
CREATE INDEX IDX_APPLICATIONS_APP_TYPE ON APPLICATIONS(APP_TYPE);
CREATE INDEX IDX_APPLICATIONS_MINIMUM_ROLE ON APPLICATIONS(MINIMUM_ROLE);
CREATE INDEX IDX_APPLICATIONS_SORT_ORDER ON APPLICATIONS(SORT_ORDER);

CREATE INDEX IDX_USER_SETTINGS_USER_ID ON USER_SETTINGS(USER_ID);

CREATE INDEX IDX_AUDIT_LOGS_TIMESTAMP_UTC ON AUDIT_LOGS(TIMESTAMP_UTC);
CREATE INDEX IDX_AUDIT_LOGS_USER_ID ON AUDIT_LOGS(USER_ID);
CREATE INDEX IDX_AUDIT_LOGS_ACTION ON AUDIT_LOGS(ACTION);
CREATE INDEX IDX_AUDIT_LOGS_USERNAME ON AUDIT_LOGS(USERNAME);

CREATE INDEX IDX_MIGRATION_HISTORY_VERSION ON MIGRATION_HISTORY(VERSION);
CREATE INDEX IDX_MIGRATION_HISTORY_APPLIED_AT ON MIGRATION_HISTORY(APPLIED_AT);

-- ===== –ü–†–ê–í–ê –î–û–°–¢–£–ü–ê =====
GRANT SELECT, INSERT, UPDATE, DELETE ON USERS TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON APPLICATIONS TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON USER_SETTINGS TO KDV_LAUNCHER;
GRANT SELECT, INSERT ON AUDIT_LOGS TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON DATABASE_VERSION TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON MIGRATION_HISTORY TO KDV_LAUNCHER;

-- –†–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞
GRANT SELECT ON USERS TO LAUNCHER_READONLY;
GRANT SELECT ON APPLICATIONS TO LAUNCHER_READONLY;
GRANT SELECT ON USER_SETTINGS TO LAUNCHER_READONLY;
GRANT SELECT ON AUDIT_LOGS TO LAUNCHER_READONLY;

GRANT LAUNCHER_READONLY TO LAUNCHER_USER;
GRANT SELECT, INSERT, UPDATE ON USER_SETTINGS TO LAUNCHER_USER;
GRANT INSERT ON AUDIT_LOGS TO LAUNCHER_USER;

GRANT LAUNCHER_USER TO LAUNCHER_ADMIN;
GRANT SELECT, INSERT, UPDATE, DELETE ON USERS TO LAUNCHER_ADMIN;
GRANT SELECT, INSERT, UPDATE, DELETE ON APPLICATIONS TO LAUNCHER_ADMIN;

-- ===== –ù–ê–ß–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï =====
INSERT INTO DATABASE_VERSION (VERSION, APPLIED_AT, APPLICATION_VERSION)
VALUES ('1.0.0.001', CURRENT_TIMESTAMP, '1.0.0');

INSERT INTO MIGRATION_HISTORY (VERSION, NAME, DESCRIPTION, APPLIED_AT)
VALUES ('1.0.0.001', 'InitialSchema', 'Create initial database schema with all tables and indexes for Firebird 5.0 server deployment', CURRENT_TIMESTAMP);

-- –ë–∞–∑–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (guest)
INSERT INTO USERS (USERNAME, DISPLAY_NAME, EMAIL, ROLE, IS_ACTIVE, IS_SERVICE_ACCOUNT, 
                   PASSWORD_HASH, SALT, CREATED_AT, AUTHENTICATION_TYPE, DOMAIN_USERNAME, 
                   IS_LOCAL_USER, ALLOW_LOCAL_LOGIN, FAILED_LOGIN_ATTEMPTS, IS_LOCKED, 
                   GROUPS_JSON, SETTINGS_JSON, METADATA_JSON)
VALUES ('guest', 'Guest User', 'guest@local', 2, TRUE, FALSE, '', '', CURRENT_TIMESTAMP, 
        0, '', TRUE, FALSE, 0, FALSE, '[]', '{}', '{}');

-- –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Calculator', 'Windows Calculator', 'calc.exe', 'üßÆ', 'Utilities', 1, 2, TRUE, 1, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Notepad', 'Text Editor', 'notepad.exe', 'üìù', 'Utilities', 1, 2, TRUE, 2, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Google', 'Google Search', 'https://www.google.com', 'üåê', 'Web', 2, 2, TRUE, 3, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Control Panel', 'Windows Control Panel', 'control.exe', '‚öôÔ∏è', 'System', 1, 1, TRUE, 4, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '["LauncherPowerUsers", "LauncherAdmins"]');

INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Command Prompt', 'Windows Command Line', 'cmd.exe', 'üíª', 'System', 1, 2, TRUE, 5, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

COMMIT;

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT 'Firebird 5.0 server database v1.0.0.001 created successfully!' AS STATUS FROM RDB$DATABASE;

-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT RDB$RELATION_NAME AS TABLE_NAME 
FROM RDB$RELATIONS 
WHERE RDB$VIEW_BLR IS NULL 
AND (RDB$SYSTEM_FLAG IS NULL OR RDB$SYSTEM_FLAG = 0)
ORDER BY RDB$RELATION_NAME;

/*
===== –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ FIREBIRD 5.0 SERVER =====

1. –ü–û–î–ì–û–¢–û–í–ö–ê –°–ï–†–í–ï–†–ê:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Firebird Server 5.0+
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firebird.conf (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø–æ—Ä—Ç—ã, –ø–∞–º—è—Ç—å)
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É Firebird
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –¥–ª—è –ø–æ—Ä—Ç–∞ 3050

2. –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:
   isql "C:\Program Files\Firebird\Firebird_5_0\security5.fdb" -user SYSDBA -password your_sysdba_password
   CREATE USER KDV_LAUNCHER PASSWORD 'KDV_L@unch3r_S3cur3_2025!';
   QUIT;

3. –°–û–ó–î–ê–ù–ò–ï –ë–î:
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ –ø–æ–¥ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ: isql -i create_firebird_server_v1.0.0.001_FIXED.sql
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–∞

4. –ù–ê–°–¢–†–û–ô–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:
   {
     "DatabaseType": "Firebird",
     "Server": "localhost", 
     "Port": 3050,
     "DatabasePath": "KDV_LAUNCHER",
     "Username": "KDV_LAUNCHER",
     "Password": "KDV_L@unch3r_S3cur3_2025!",
     "ConnectionMode": "ClientServer",
     "ConnectionTimeout": 30
   }

–í–ê–ñ–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í FIREBIRD 5.0:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è security5.fdb –≤–º–µ—Å—Ç–æ security3.fdb
- IDENTITY –∫–æ–ª–æ–Ω–∫–∏ –∑–∞–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ä—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã + —Ç—Ä–∏–≥–≥–µ—Ä—ã
- –£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ DEFAULT –∑–Ω–∞—á–µ–Ω–∏–π
- BLOB SUB_TYPE TEXT –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–ö–û–ú–ê–ù–î–´ –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø:
1. isql "C:\Program Files\Firebird\Firebird_5_0\security5.fdb" -user SYSDBA -password YOUR_PASSWORD
2. CREATE USER KDV_LAUNCHER PASSWORD 'KDV_L@unch3r_S3cur3_2025!';
3. QUIT;
4. isql -i create_firebird_server_v1.0.0.001_FIXED.sql
*/