# –û—Ç—á–µ—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ MainViewModel - –°–µ—Å—Å–∏—è –æ—Ç 16.08.2025

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### MainViewModel —Å–æ–∫—Ä–∞—â–µ–Ω —Å 1486 –¥–æ 869 —Å—Ç—Ä–æ–∫ (-617 —Å—Ç—Ä–æ–∫, -41.5%)

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ WSAStatusViewModel (185 —Å—Ç—Ä–æ–∫)
- **–§–∞–π–ª:** `WindowsLauncher.UI/ViewModels/WSAStatusViewModel.cs` (215 —Å—Ç—Ä–æ–∫)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º Android –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã (WSA)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ `WSAStatus.PropertyName`
- **–°–æ–±—ã—Ç–∏—è:** StatusChanged –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** MainViewModel 1486 ‚Üí 1301 —Å—Ç—Ä–æ–∫–∞

### 2. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ CategoryManagementViewModel (515 —Å—Ç—Ä–æ–∫) 
- **–§–∞–π–ª:** `WindowsLauncher.UI/ViewModels/CategoryManagementViewModel.cs` (515 —Å—Ç—Ä–æ–∫)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** 
  - –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –∏—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π
  - –õ–æ–≥–∏–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ "–í—Å–µ" –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - –°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
  - Events –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å MainViewModel
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CategoryManagementService
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** Event-driven —á–µ—Ä–µ–∑ `FilteringRequested`
- **XAML –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
  - `{Binding SearchText}` ‚Üí `{Binding CategoryManager.SearchText}`
  - `{Binding LocalizedCategories}` ‚Üí `{Binding CategoryManager.LocalizedCategories}`
  - `{Binding HasActiveFilter}` ‚Üí `{Binding CategoryManager.HasActiveFilter}`
- **–£–¥–∞–ª–µ–Ω–æ –∏–∑ MainViewModel:**
  - `OnCategoryPropertyChanged()` - –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ–∫–±–æ–∫—Å–æ–≤
  - `UpdateActiveFilterStatus()` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
  - `LoadLocalizedCategoriesAsync()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - `GetLocalizedCategoryName()` - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
  - –î—É–±–ª–∏—Ä—É—é—â–∏–π –∫–ª–∞—Å—Å `CategoryViewModel`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** MainViewModel 1301 ‚Üí 922 —Å—Ç—Ä–æ–∫–∏

### 3. ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ "–°–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" –∏ "–í—ã–π—Ç–∏"
- **UI –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (üë§)
  - –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞)
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ —Å üö™ –Ω–∞ üîí
  - –£–ø—Ä–æ—â–µ–Ω layout –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **–ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
  - `SwitchUserCommand` + `LogoutCommand` ‚Üí `ExitApplicationCommand`
  - `Logout()` + `SwitchUser()` ‚Üí `ExitApplication()`
  - `HandleUserSwitchAsync()` ‚Üí `HandleUserLogoutAsync()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** MainViewModel 922 ‚Üí 869 —Å—Ç—Ä–æ–∫

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ **CS0229** - –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å CategoryViewModel (—É–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–ª–∞—Å—Å)
- ‚úÖ **CS0121** - –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ (—Ä–µ—à–µ–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥—É–±–ª–∏–∫–∞—Ç–∞)
- ‚úÖ **CS4033** - await –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –º–µ—Ç–æ–¥–µ (`OnLanguageChanged` —Å–¥–µ–ª–∞–Ω `async void`)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø—ã SOLID:
- **Single Responsibility:** –ö–∞–∂–¥—ã–π ViewModel –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- **Dependency Injection:** –í—Å–µ ViewModels –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ Singleton
- **Event-driven:** –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É ViewModels

### –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
```csharp
// MainViewModel
public string SearchText 
{
    get => CategoryManager.SearchText;
    set => CategoryManager.SearchText = value;
}

public ObservableCollection<CategoryViewModel> LocalizedCategories => CategoryManager.LocalizedCategories;
```

### DI —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
```csharp
// App.xaml.cs
services.AddSingleton<WSAStatusViewModel>();
services.AddSingleton<CategoryManagementViewModel>();
```

## üìÇ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

```
WindowsLauncher.UI/ViewModels/
‚îú‚îÄ‚îÄ MainViewModel.cs                    # 869 —Å—Ç—Ä–æ–∫ (–±—ã–ª–æ 1486)
‚îú‚îÄ‚îÄ WSAStatusViewModel.cs               # 215 —Å—Ç—Ä–æ–∫ (–ù–û–í–´–ô)
‚îú‚îÄ‚îÄ CategoryManagementViewModel.cs      # 515 —Å—Ç—Ä–æ–∫ (–ù–û–í–´–ô)
‚îî‚îÄ‚îÄ ApplicationManagementViewModel.cs   # –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### UserSessionViewModel (~100 —Å—Ç—Ä–æ–∫)
**–ö–∞–Ω–¥–∏–¥–∞—Ç –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –õ–æ–≥–∏–∫–∞ —Å–º–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
- –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–µ—Å—Å–∏–∏

**–ú–µ—Ç–æ–¥—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:**
- `HandleUserLogoutAsync()`
- `CloseUserApplicationsAsync()`
- –õ–æ–≥–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `CurrentUser`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** MainViewModel ~770 —Å—Ç—Ä–æ–∫

### –î—Ä—É–≥–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã:
- **OfficeToolsViewModel** - —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (email, address book, help)
- **SettingsViewModel** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **ApplicationLaunchViewModel** - –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
```
[DBG] User guest role "Guest" is below minimum required "PowerUser" for app Calculator
```
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–õ–æ–∫–∞—Ü–∏—è:** ApplicationService –∏–ª–∏ SecurityService
- **–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∏—Å–∫–∞:** `"is below minimum required"`
- **–°—Ç–∞—Ç—É—Å:** –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|-------|--------|-----------|
| MainViewModel —Å—Ç—Ä–æ–∫–∏ | 1486 | 869 | -617 (-41.5%) |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ ViewModels | 1 | 3 | +2 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö |
| –ú–µ—Ç–æ–¥—ã –≤ MainViewModel | ~45 | ~35 | -10 –º–µ—Ç–æ–¥–æ–≤ |
| –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è | –†–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è | SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã |

## üîÑ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
dotnet build

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
dotnet run --project WindowsLauncher.UI

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è MainViewModel
wc -l /mnt/c/WindowsLauncher/WindowsLauncher.UI/ViewModels/MainViewModel.cs
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å UserSessionViewModel** –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è
3. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Unit —Ç–µ—Å—Ç—ã** –¥–ª—è –Ω–æ–≤—ã—Ö ViewModels
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –¥–ª—è –±—É–¥—É—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---
*–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: 16.08.2025*
*–°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ UserSessionViewModel*