–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Firebird 5.0
–í–∞—à —Å–∫—Ä–∏–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ Firebird 5.0. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å–∫—Ä–∏–ø—Ç–µ:
1. DEFAULT –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è VARCHAR –ø–æ–ª–µ–π
–í Firebird –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ '' –∫–∞–∫ DEFAULT –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NULL –∏–ª–∏ —É–±—Ä–∞—Ç—å DEFAULT —Å–æ–≤—Å–µ–º.

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö GENERATOR –≤–º–µ—Å—Ç–æ IDENTITY
Firebird 3.0+ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ IDENTITY –∫–æ–ª–æ–Ω–∫–∏ –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤.

3. –û—à–∏–±–∫–∏ –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –∫–æ–ª–æ–Ω–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö.

4. –ë–∞–∑–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è security3.fdb, –Ω–æ –≤ Firebird 5.0 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è security5.fdb.

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
sql
-- ===== create_firebird_server_v1.0.0.001_FIXED.sql =====
-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Firebird 5.0

-- ===== –°–û–ó–î–ê–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–• =====
CREATE DATABASE 'KDV_LAUNCHER'
PAGE_SIZE 16384
USER 'SYSDBA'
PASSWORD 'Ghtgj8;

CONNECT 'KDV_LAUNCHER'
USER 'SYSDBA'
PASSWORD 'Ghtgjyf1';

-- ===== –°–û–ó–î–ê–ù–ò–ï –†–û–õ–ï–ô –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò =====
CREATE ROLE LAUNCHER_USER;
CREATE ROLE LAUNCHER_ADMIN;
CREATE ROLE LAUNCHER_READONLY;

-- ===== –°–û–ó–î–ê–ù–ò–ï –¢–ê–ë–õ–ò–¶ –° IDENTITY –ö–û–õ–û–ù–ö–ê–ú–ò =====

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
CREATE TABLE USERS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USERNAME VARCHAR(100) NOT NULL,
    DISPLAY_NAME VARCHAR(200) NOT NULL,
    EMAIL VARCHAR(255),
    ROLE INTEGER NOT NULL DEFAULT 2,
    IS_ACTIVE SMALLINT NOT NULL DEFAULT 1,
    IS_SERVICE_ACCOUNT SMALLINT NOT NULL DEFAULT 0,
    PASSWORD_HASH VARCHAR(500),
    SALT VARCHAR(500),
    CREATED_AT TIMESTAMP NOT NULL,
    LAST_LOGIN_AT TIMESTAMP,
    LAST_ACTIVITY_AT TIMESTAMP,
    FAILED_LOGIN_ATTEMPTS INTEGER NOT NULL DEFAULT 0,
    IS_LOCKED SMALLINT NOT NULL DEFAULT 0,
    LOCKOUT_END TIMESTAMP,
    LAST_PASSWORD_CHANGE TIMESTAMP,
    GROUPS_JSON VARCHAR(2000) DEFAULT '[]',
    SETTINGS_JSON VARCHAR(4000) DEFAULT '{}',
    METADATA_JSON VARCHAR(2000) DEFAULT '{}',
    AUTHENTICATION_TYPE INTEGER NOT NULL DEFAULT 0,
    DOMAIN_USERNAME VARCHAR(100),
    LAST_DOMAIN_SYNC TIMESTAMP,
    IS_LOCAL_USER SMALLINT NOT NULL DEFAULT 1,
    ALLOW_LOCAL_LOGIN SMALLINT NOT NULL DEFAULT 0,
    CONSTRAINT UQ_USERS_USERNAME UNIQUE (USERNAME)
);

-- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
CREATE TABLE APPLICATIONS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(200) NOT NULL,
    DESCRIPTION VARCHAR(500),
    EXECUTABLE_PATH VARCHAR(1000) NOT NULL,
    ARGUMENTS VARCHAR(500),
    WORKING_DIRECTORY VARCHAR(1000),
    ICON_PATH VARCHAR(1000),
    ICONTEXT VARCHAR(50) DEFAULT 'üì±',
    CATEGORY VARCHAR(100),
    APP_TYPE INTEGER NOT NULL DEFAULT 0,
    MINIMUM_ROLE INTEGER NOT NULL DEFAULT 2,
    IS_ENABLED SMALLINT NOT NULL DEFAULT 1,
    SORT_ORDER INTEGER NOT NULL DEFAULT 0,
    CREATED_DATE TIMESTAMP NOT NULL,
    MODIFIED_DATE TIMESTAMP NOT NULL,
    CREATED_BY VARCHAR(100),
    REQUIRED_GROUPS BLOB SUB_TYPE TEXT DEFAULT '[]'
);

-- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
CREATE TABLE USER_SETTINGS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USER_ID INTEGER NOT NULL,
    THEME VARCHAR(50) DEFAULT 'Light',
    ACCENT_COLOR VARCHAR(50) DEFAULT 'Blue',
    TILE_SIZE INTEGER DEFAULT 150,
    SHOW_CATEGORIES SMALLINT DEFAULT 1,
    DEFAULT_CATEGORY VARCHAR(100) DEFAULT 'All',
    AUTO_REFRESH SMALLINT DEFAULT 1,
    REFRESH_INTERVAL_MINUTES INTEGER DEFAULT 30,
    SHOW_DESCRIPTIONS SMALLINT DEFAULT 1,
    HIDDEN_CATEGORIES BLOB SUB_TYPE TEXT DEFAULT '[]',
    LAST_MODIFIED TIMESTAMP NOT NULL,
    CONSTRAINT FK_USER_SETTINGS_USER_ID FOREIGN KEY (USER_ID) 
        REFERENCES USERS(ID) ON DELETE CASCADE
);

-- –¢–∞–±–ª–∏—Ü–∞ –∞—É–¥–∏—Ç–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
CREATE TABLE AUDIT_LOGS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USER_ID INTEGER,
    USERNAME VARCHAR(100) NOT NULL,
    ACTION VARCHAR(100) NOT NULL,
    APPLICATION_NAME VARCHAR(200),
    DETAILS BLOB SUB_TYPE TEXT,
    TIMESTAMP_UTC TIMESTAMP NOT NULL,
    SUCCESS SMALLINT NOT NULL DEFAULT 1,
    ERROR_MESSAGE VARCHAR(1000),
    COMPUTER_NAME VARCHAR(100),
    IP_ADDRESS VARCHAR(45),
    USER_AGENT VARCHAR(500),
    METADATA_JSON BLOB SUB_TYPE TEXT DEFAULT '{}',
    CONSTRAINT FK_AUDIT_LOGS_USER_ID FOREIGN KEY (USER_ID) 
        REFERENCES USERS(ID) ON DELETE SET NULL
);

-- –¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä—Å–∏–π –ë–î
CREATE TABLE DATABASE_VERSION (
    VERSION VARCHAR(20) NOT NULL,
    APPLIED_AT TIMESTAMP NOT NULL,
    APPLICATION_VERSION VARCHAR(20),
    CONSTRAINT PK_DATABASE_VERSION PRIMARY KEY (VERSION)
);

-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
CREATE TABLE MIGRATION_HISTORY (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    VERSION VARCHAR(20) NOT NULL,
    NAME VARCHAR(200) NOT NULL,
    DESCRIPTION BLOB SUB_TYPE TEXT,
    APPLIED_AT TIMESTAMP NOT NULL,
    ROLLBACK_SCRIPT BLOB SUB_TYPE TEXT
);

-- ===== –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ò–ù–î–ï–ö–°–´ =====
CREATE INDEX IDX_USERS_USERNAME ON USERS(USERNAME);
CREATE INDEX IDX_USERS_ROLE ON USERS(ROLE);
CREATE INDEX IDX_USERS_IS_ACTIVE ON USERS(IS_ACTIVE);
CREATE INDEX IDX_USERS_AUTHENTICATION_TYPE ON USERS(AUTHENTICATION_TYPE);
CREATE INDEX IDX_USERS_LAST_LOGIN_AT ON USERS(LAST_LOGIN_AT);

CREATE INDEX IDX_APPLICATIONS_NAME ON APPLICATIONS(NAME);
CREATE INDEX IDX_APPLICATIONS_CATEGORY ON APPLICATIONS(CATEGORY);
CREATE INDEX IDX_APPLICATIONS_IS_ENABLED ON APPLICATIONS(IS_ENABLED);
CREATE INDEX IDX_APPLICATIONS_APP_TYPE ON APPLICATIONS(APP_TYPE);
CREATE INDEX IDX_APPLICATIONS_MINIMUM_ROLE ON APPLICATIONS(MINIMUM_ROLE);
CREATE INDEX IDX_APPLICATIONS_SORT_ORDER ON APPLICATIONS(SORT_ORDER);

CREATE INDEX IDX_USER_SETTINGS_USER_ID ON USER_SETTINGS(USER_ID);

CREATE INDEX IDX_AUDIT_LOGS_TIMESTAMP_UTC ON AUDIT_LOGS(TIMESTAMP_UTC);
CREATE INDEX IDX_AUDIT_LOGS_USER_ID ON AUDIT_LOGS(USER_ID);
CREATE INDEX IDX_AUDIT_LOGS_ACTION ON AUDIT_LOGS(ACTION);
CREATE INDEX IDX_AUDIT_LOGS_USERNAME ON AUDIT_LOGS(USERNAME);

CREATE INDEX IDX_MIGRATION_HISTORY_VERSION ON MIGRATION_HISTORY(VERSION);
CREATE INDEX IDX_MIGRATION_HISTORY_APPLIED_AT ON MIGRATION_HISTORY(APPLIED_AT);

-- ===== –ü–†–ê–í–ê –î–û–°–¢–£–ü–ê =====
GRANT SELECT, INSERT, UPDATE, DELETE ON USERS TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON APPLICATIONS TO KDV_LAUNCHER;
GRANT SELECT, INSERT, UPDATE, DELETE ON USER_SETTINGS TO KDV_LAUNCHER;
GRANT SELECT, INSERT ON AUDIT_LOGS TO KDV_LAUNCHER;
GRANT SELECT ON DATABASE_VERSION TO KDV_LAUNCHER;
GRANT SELECT, INSERT ON MIGRATION_HISTORY TO KDV_LAUNCHER;

-- –†–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞
GRANT SELECT ON USERS TO LAUNCHER_READONLY;
GRANT SELECT ON APPLICATIONS TO LAUNCHER_READONLY;
GRANT SELECT ON USER_SETTINGS TO LAUNCHER_READONLY;
GRANT SELECT ON AUDIT_LOGS TO LAUNCHER_READONLY;

GRANT LAUNCHER_READONLY TO LAUNCHER_USER;
GRANT SELECT, INSERT, UPDATE ON USER_SETTINGS TO LAUNCHER_USER;
GRANT INSERT ON AUDIT_LOGS TO LAUNCHER_USER;

GRANT LAUNCHER_USER TO LAUNCHER_ADMIN;
GRANT SELECT, INSERT, UPDATE, DELETE ON USERS TO LAUNCHER_ADMIN;
GRANT SELECT, INSERT, UPDATE, DELETE ON APPLICATIONS TO LAUNCHER_ADMIN;

-- ===== –ù–ê–ß–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï =====
INSERT INTO DATABASE_VERSION (VERSION, APPLIED_AT, APPLICATION_VERSION)
VALUES ('1.0.0.001', CURRENT_TIMESTAMP, '1.0.0');

INSERT INTO MIGRATION_HISTORY (VERSION, NAME, DESCRIPTION, APPLIED_AT)
VALUES ('1.0.0.001', 'InitialSchema', 'Create initial database schema with all tables and indexes for Firebird 5.0 server deployment', CURRENT_TIMESTAMP);

-- –ë–∞–∑–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (guest)
INSERT INTO USERS (USERNAME, DISPLAY_NAME, EMAIL, ROLE, IS_ACTIVE, IS_SERVICE_ACCOUNT, 
                   PASSWORD_HASH, SALT, CREATED_AT, AUTHENTICATION_TYPE, DOMAIN_USERNAME, 
                   IS_LOCAL_USER, ALLOW_LOCAL_LOGIN, FAILED_LOGIN_ATTEMPTS, IS_LOCKED, 
                   GROUPS_JSON, SETTINGS_JSON, METADATA_JSON)
VALUES ('guest', 'Guest User', 'guest@local', 2, 1, 0, '', '', CURRENT_TIMESTAMP, 
        0, '', 1, 0, 0, 0, '[]', '{}', '{}');

-- –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Calculator', 'Windows Calculator', 'calc.exe', 'üßÆ', 'Utilities', 0, 2, 1, 1, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

INSERT INTO APPLICATIONS (NAME, DESCRIPTION, EXECUTABLE_PATH, ICONTEXT, CATEGORY, 
                         APP_TYPE, MINIMUM_ROLE, IS_ENABLED, SORT_ORDER, CREATED_DATE, 
                         MODIFIED_DATE, CREATED_BY, REQUIRED_GROUPS)
VALUES ('Notepad', 'Text Editor', 'notepad.exe', 'üìù', 'Utilities', 0, 2, 1, 2, 
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'System', '[]');

COMMIT;

-- ===== –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø FIREBIRD 5.0 =====
/*
===== –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ FIREBIRD 5.0 SERVER =====

1. –ü–û–î–ì–û–¢–û–í–ö–ê –°–ï–†–í–ï–†–ê:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Firebird Server 5.0+
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firebird.conf (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø–æ—Ä—Ç—ã, –ø–∞–º—è—Ç—å)
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É Firebird
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –¥–ª—è –ø–æ—Ä—Ç–∞ 3050

2. –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:
   isql "C:\Program Files\Firebird\Firebird_5_0\security5.fdb" -user SYSDBA -password your_sysdba_password
   CREATE USER KDV_LAUNCHER PASSWORD 'KDV_L@unch3r_S3cur3_2025!';
   QUIT;

3. –°–û–ó–î–ê–ù–ò–ï –ë–î:
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç–∏ –∏ –ø–∞—Ä–æ–ª–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ: isql -i create_firebird_server_v1.0.0.001_FIXED.sql

4. –ù–ê–°–¢–†–û–ô–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:
   "DatabaseType": "Firebird",
   "Server": "localhost", 
   "Port": 3050,
   "DatabasePath": "C:\\FirebirdData\\WindowsLauncher\\launcher_server.fdb",
   "Username": "KDV_LAUNCHER",
   "Password": "KDV_L@unch3r_S3cur3_2025!",
   "ConnectionMode": "Server",
   "ConnectionTimeout": 30

–í–ê–ñ–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í FIREBIRD 5.0:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è security5.fdb –≤–º–µ—Å—Ç–æ security3.fdb
- IDENTITY –∫–æ–ª–æ–Ω–∫–∏ –∑–∞–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ä—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã + —Ç—Ä–∏–≥–≥–µ—Ä—ã
- –£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ DEFAULT –∑–Ω–∞—á–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
*/

SELECT 'Firebird 5.0 server database v1.0.0.001 created successfully!' AS STATUS FROM RDB$DATABASE;
–ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
–ó–∞–º–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –Ω–∞ IDENTITY –∫–æ–ª–æ–Ω–∫–∏ - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Firebird 3.0+

–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö DEFAULT '' –¥–ª—è VARCHAR –ø–æ–ª–µ–π

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω –∫–æ–ª–æ–Ω–æ–∫ –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö - —É–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å BLOB SUB_TYPE –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è security5.fdb –≤–º–µ—Å—Ç–æ security3.fdb